<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, height=device-height, initial-scale=1.0, shrink-to-fit=no">
    <title>Dashboard - 3TPT</title>
    <link rel="icon" type="image/png" sizes="16x16" href="/img/favicon/favicon-16x16.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/img/favicon/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="180x180" href="/img/favicon/apple-icon-180x180.png">
    <link rel="icon" type="image/png" sizes="192x192" href="/img/favicon/android-icon-192x192.png">
    <link rel="icon" type="image/jpeg" sizes="440x332" href="/img/5ton.jpg">
    <link rel="stylesheet" href="/bootstrap/css/bootstrap.min.css">
    <link rel="manifest" href="manifest.json">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Nunito:200,200i,300,300i,400,400i,600,600i,700,700i,800,800i,900,900i">
    <link rel="stylesheet" href="/fonts/fontawesome-all.min.css">
    <link rel="stylesheet" href="/css/Data-Table-1.css">
    <link rel="stylesheet" href="/css/Data-Table.css">
    <!--<link rel="stylesheet" href="https://cdn.datatables.net/v/bs4/dt-1.10.20/datatables.min.css">-->
    <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/v/bs4/dt-1.10.20/b-1.6.1/b-colvis-1.6.1/b-flash-1.6.1/b-html5-1.6.1/r-2.2.3/datatables.min.css"/>
    <!--<script src="client.js" defer></script>-->
    <style>
      
      .signature{
        border: 1px solid black;
        width: 70%;
        margin: auto;
        display: block;
      }
      
      /* Center the loader */
      #loader {
        position: absolute;
        left: 55%;
        top: 50%;
        z-index: 1;
        width: 150px;
        height: 150px;
        margin: -75px 0 0 -75px;
        border: 16px solid #f3f3f3;
        border-radius: 50%;
        border-top: 16px solid #3498db;
        width: 120px;
        height: 120px;
        -webkit-animation: spin 2s linear infinite;
        animation: spin 2s linear infinite;
      }

      @-webkit-keyframes spin {
        0% { -webkit-transform: rotate(0deg); }
        100% { -webkit-transform: rotate(360deg); }
      }

      @keyframes spin {
        0% { transform: rotate(0deg); }
        100% { transform: rotate(360deg); }
      }

      /* Add animation to "page content" */
      .animate-bottom {
        position: relative;
        -webkit-animation-name: animatebottom;
        -webkit-animation-duration: 1s;
        animation-name: animatebottom;
        animation-duration: 1s
      }

      @-webkit-keyframes animatebottom {
        from { bottom:-100px; opacity:0 } 
        to { bottom:0px; opacity:1 }
      }

      @keyframes animatebottom { 
        from{ bottom:-100px; opacity:0 } 
        to{ bottom:0; opacity:1 }
      }
      
      .modal-pane{
        width: 100%;
        flex: 0 0 100%;
        display: flex;
        flex-direction: column;
        justify-content: start;
        padding: 6px;
        overflow-y: scroll;
      }
      
      #modal-create-rac-panes{
        transition: transform 0.8s ease-in-out;
      }
      
      .modal-pane::-webkit-scrollbar {
        width: 3px;
      }
      
      
      /*https://stackoverflow.com/questions/3790935/can-i-hide-the-html5-number-input-s-spin-box*/
      input::-webkit-outer-spin-button,
      input::-webkit-inner-spin-button {
        -webkit-appearance: none;
        margin: 0;
      }

      input[type=number] {
          -moz-appearance:textfield; /* Firefox */
      }
      
      #content{
        display: flex;
        flex-direction: column;
      }
      
      @media(max-width: 768px){
        #wrapper{
          height: 80vh;
        }
      }

    </style>
</head>

<body id="page-top" class="sidebar-toggled">
  <!--<div id="loader"></div>-->
    <div id="wrapper" class="animate-bottom">
        <nav class="navbar navbar-dark align-items-start sidebar sidebar-dark accordion bg-gradient-primary p-0 toggled">
            <div class="container-fluid d-flex flex-column p-0">
                <a class="navbar-brand d-flex justify-content-center align-items-center sidebar-brand m-0 nav-link-history disabled" href="index" id="nav-brand">
                    <div class="sidebar-brand-icon rotate-n-15"><i class="fas fa-truck-moving"></i></div>
                    <div class="sidebar-brand-text mx-3"><span>3TPT</span></div>
                </a>
                <hr class="sidebar-divider my-0">
                <ul class="nav navbar-nav text-light" id="accordionSidebar">
                    <li class="nav-item" role="presentation"><a class="nav-link active nav-link-history disabled" href="index" id="nav-index"><i class="fas fa-tachometer-alt"></i><span>Dashboard</span></a></li>
                    <li class="nav-item" role="presentation"><a class="nav-link nav-link-history disabled" href="detail" id="nav-detail"><i class="fas fa-car-side"></i><span>Detail</span></a></li>
                </ul>
                <div class="text-center d-none d-md-inline"><button class="btn rounded-circle border-0" id="sidebarToggle" type="button"></button></div>
            </div>
        </nav>
        <div class="d-flex flex-column" id="content-wrapper">
          <nav class="navbar navbar-light navbar-expand bg-white shadow mb-4 topbar static-top" style="flex: 0 0 auto;">
                    <div class="container-fluid"><button class="btn btn-link d-md-none rounded-circle mr-3" id="sidebarToggleTop" type="button"><i class="fas fa-bars"></i></button>
                        <ul class="nav navbar-nav flex-nowrap ml-auto">
                            <li class="nav-item dropdown d-sm-none no-arrow"><a class="dropdown-toggle nav-link" data-toggle="dropdown" aria-expanded="false" href=""><i class="fas fa-search"></i></a>
                                <div class="dropdown-menu dropdown-menu-right p-3 animated--grow-in" role="menu" aria-labelledby="searchDropdown">
                                    <form class="form-inline mr-auto navbar-search w-100">
                                        <div class="input-group"><input class="bg-light form-control border-0 small" type="text" placeholder="Search for ...">
                                            <div class="input-group-append"><button class="btn btn-primary py-0" type="button"><i class="fas fa-search"></i></button></div>
                                        </div>
                                    </form>
                                </div>
                            </li>
                            <li class="nav-item dropdown no-arrow mx-1" role="presentation">
                                <div class="nav-item dropdown no-arrow"><a class="dropdown-toggle nav-link" data-toggle="dropdown" aria-expanded="false" href=""><span class="badge badge-danger badge-counter"><!--insertable number--></span><i class="fas fa-bell fa-fw"></i></a>
                                    <div class="dropdown-menu dropdown-menu-right dropdown-list dropdown-menu-right animated--grow-in"
                                        role="menu">
                                        <h6 class="dropdown-header">test</h6>
                                        <a class="d-flex align-items-center dropdown-item" href="">
                                            <div class="mr-3">
                                                <div class="bg-primary icon-circle"><i class="fas fa-file-alt text-white"></i></div>
                                            </div>
                                            <div><span class="small text-gray-500">test</span>
                                                <p>test</p>
                                            </div>
                                        </a>
                                        <a class="d-flex align-items-center dropdown-item" href="">
                                            <div class="mr-3">
                                                <div class="bg-success icon-circle"><i class="fas fa-donate text-white"></i></div>
                                            </div>
                                            <div><span class="small text-gray-500">test</span>
                                                <p>test</p>
                                            </div>
                                        </a>
                                        <a class="d-flex align-items-center dropdown-item" href="">
                                            <div class="mr-3">
                                                <div class="bg-warning icon-circle"><i class="fas fa-exclamation-triangle text-white"></i></div>
                                            </div>
                                            <div><span class="small text-gray-500">test</span>
                                                <p>test</p>
                                            </div>
                                        </a><a class="text-center dropdown-item small text-gray-500" href="">Show All Alerts</a></div>
                                </div>
                            </li>
                            <li class="nav-item dropdown no-arrow mx-1" role="presentation">
                                <div class="nav-item dropdown no-arrow"><a class="dropdown-toggle nav-link" data-toggle="dropdown" aria-expanded="false" href=""><i class="fas fa-envelope fa-fw"></i><span class="badge badge-danger badge-counter"><!--insertable number--></span></a>
                                    <div class="dropdown-menu dropdown-menu-right dropdown-list dropdown-menu-right animated--grow-in"
                                        role="menu">
                                        <h6 class="dropdown-header">test</h6>
                                        <a class="d-flex align-items-center dropdown-item" href="">
                                            <div class="dropdown-list-image mr-3"><img class="rounded-circle" src="/img/avatars/avatar4.jpeg">
                                                <div class="bg-success status-indicator"></div>
                                            </div>
                                            <div class="font-weight-bold">
                                                <div class="text-truncate"><span>test</span></div>
                                                <p class="small text-gray-500 mb-0">test</p>
                                            </div>
                                        </a>
                                        <a class="d-flex align-items-center dropdown-item" href="">
                                            <div class="dropdown-list-image mr-3"><img class="rounded-circle" src="/img/avatars/avatar2.jpeg">
                                                <div class="status-indicator"></div>
                                            </div>
                                            <div class="font-weight-bold">
                                                <div class="text-truncate"><span>test</span></div>
                                                <p class="small text-gray-500 mb-0">test</p>
                                            </div>
                                        </a>
                                        <a class="d-flex align-items-center dropdown-item" href="">
                                            <div class="dropdown-list-image mr-3"><img class="rounded-circle" src="/img/avatars/avatar3.jpeg">
                                                <div class="bg-warning status-indicator"></div>
                                            </div>
                                            <div class="font-weight-bold">
                                                <div class="text-truncate"><span>test</span></div>
                                                <p class="small text-gray-500 mb-0">test</p>
                                            </div>
                                        </a>
                                        <a class="d-flex align-items-center dropdown-item" href="">
                                            <div class="dropdown-list-image mr-3"><img class="rounded-circle" src="/img/avatars/avatar5.jpeg">
                                                <div class="bg-success status-indicator"></div>
                                            </div>
                                            <div class="font-weight-bold">
                                                <div class="text-truncate"><span>test</span></div>
                                                <p class="small text-gray-500 mb-0">test</p>
                                            </div>
                                        </a><a class="text-center dropdown-item small text-gray-500" href="">Show All Alerts</a></div>
                                </div>
                                <div class="shadow dropdown-list dropdown-menu dropdown-menu-right" aria-labelledby="alertsDropdown"></div>
                            </li>
                            <div class="d-none d-sm-block topbar-divider"></div>
                            <li class="nav-item dropdown no-arrow" role="presentation">
                                <div class="nav-item dropdown no-arrow"><a class="dropdown-toggle nav-link" data-toggle="dropdown" aria-expanded="false" href=""><span class="d-none d-lg-inline mr-2 text-gray-600 small" id="name-holder"></span><img class="border rounded-circle img-profile" src="/img/avatars/avatar5.jpeg"></a>
                                    <div
                                        class="dropdown-menu shadow dropdown-menu-right animated--grow-in" role="menu"><a class="dropdown-item" role="presentation" href=""><i class="fas fa-user fa-sm fa-fw mr-2 text-gray-400"></i>&nbsp;test</a><a class="dropdown-item" role="presentation" href=""><i class="fas fa-cogs fa-sm fa-fw mr-2 text-gray-400"></i>&nbsp;test</a>
                                        <a
                                            class="dropdown-item" role="presentation" href=""><i class="fas fa-list fa-sm fa-fw mr-2 text-gray-400"></i>&nbsp;test</a>
                                            <div class="dropdown-divider"></div><a class="dropdown-item" role="presentation" href="logout"><i class="fas fa-sign-out-alt fa-sm fa-fw mr-2 text-gray-400"></i>&nbsp;Logout</a></div>
                    </div>
                    </li>
                    </ul>
            </div>
            </nav>
            <div id="content" style="flex: 1 1 0;">
              
              
              
              
              
              
              
            <!--Index Page -->
            <div id="page-index" class="container-fluid page currentPage">
                <div class="d-sm-flex justify-content-between align-items-center mb-4">
                    <h3 class="text-dark mb-0">Dashboard (Placeholder)</h3>
                </div>
        </div>
              
              
              
              
              
              
              
              
              
              
                   <!--Details Page-->
           <div id="page-detail" class="container-fluid d-none page" style="height: 100%;">
             <!--             use this one next time
                <div class="card shadow">
                    <div class="card-header py-3">
                        <p class="text-primary m-0 font-weight-bold">Details and RAC</p>
                    </div>
                    <div class="card-body">
                        <div class="row">
                            <div class="col-md-6 text-nowrap">
                                <div id="userDetailsTable_length" class="dataTables_length" aria-controls="dataTable"><label>Show&nbsp;<select class="form-control form-control-sm custom-select custom-select-sm"><option value="10" selected="">10</option><option value="25">25</option><option value="50">50</option><option value="100">100</option></select>&nbsp;</label></div>
                            </div>
                            <div class="col-md-6">
                                <div class="text-md-right dataTables_filter" id="userDetailsTable_filter"><label><input type="search" class="form-control form-control-sm" aria-controls="dataTable" placeholder="Search"></label></div>
                            </div>
                        </div>
                        <div class="table-responsive table mt-2" id="userDetailTable" role="grid" aria-describedby="dataTable_info">
                            <table class="table dataTable my-0" id="userDetailTable1">
                                <thead>
                                    <tr>
                                        <th>Date Start</th>
                                        <th>Detail Name</th>
                                        <th>Indent Unit</th>
                                        <th>RAC</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>15/10/2019<br></td>
                                        <td>Sembawang Wharves</td>
                                        <td>9SIR Delta</td>
                                        <td>pdficon 1 2 3</td>
                                    </tr>
                                    <tr>
                                        <td>15/10/2019<br></td>
                                        <td>Sembawang Wharves</td>
                                        <td>9SIR Delta</td>
                                        <td>pdficon 1 2 3</td>
                                    </tr>
                                </tbody>
                                <tfoot>
                                    <tr>
                                        <td><strong>Date Start</strong></td>
                                        <td><strong>Detail Name</strong></td>
                                        <td><strong>Indent Unit</strong></td>
                                        <td><strong>Date End</strong></td>
                                    </tr>
                                </tfoot>
                            </table>
                        </div>
                        <div class="row">
                            <div class="col-md-6 align-self-center">
                                <p id="userDetailsTable_info" class="dataTables_info" role="status" aria-live="polite">Showing 1 to 10 of 27</p>
                            </div>
                            <div class="col-md-6">
                                <nav class="d-lg-flex justify-content-lg-end dataTables_paginate paging_simple_numbers">
                                    <ul class="pagination">
                                        <li class="page-item disabled"><a class="page-link" href="" aria-label="Previous"><span aria-hidden="true">«</span></a></li>
                                        <li class="page-item active"><a class="page-link" href="">1</a></li>
                                        <li class="page-item"><a class="page-link" href="">2</a></li>
                                        <li class="page-item"><a class="page-link" href="">3</a></li>
                                        <li class="page-item"><a class="page-link" href="" aria-label="Next"><span aria-hidden="true">»</span></a></li>
                                    </ul>
                                </nav>
                            </div>
                        </div>
                    </div>
                </div>            -->

                    <div class="card shadow" style="height: 100%;">
                    <div class="card-header py-3">
                        <p class="text-primary m-0 font-weight-bold">Details and RAC</p>
                    </div>
                    <div class="card-body" style="overflow-y: scroll;flex: 1 1 0;">
                        <div class="row">
                        </div>
                        <div class="table-responsive table mt-2" id="userDetailTable" role="grid" aria-describedby="dataTable_info">
                            <table class="table dataTable my-0" id="userDetailTableInner">
                                <thead>
                                    <tr>
                                        <th>Date Start</th>
                                        <th>Detail Name</th>
                                        <th>Vehicle</th>
                                        <th>RAC</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    
                                </tbody>
                                <tfoot>
                                    <tr>
                                        <td><strong>Date Start</strong></td>
                                        <td><strong>Detail Name</strong></td>
                                        <td><strong>Vehicle</strong></td>
                                        <td><strong>RAC</strong></td>
                                    </tr>
                                </tfoot>
                            </table>
                        </div>
                    </div>
                </div>
            </div>      
          
          
          
          
          
          
         
          
          
          
          </div>
    <footer class="bg-white sticky-footer" style="flex: 0 0 auto;">
        <div class="container my-auto">
            <div class="text-center my-auto copyright"><span>(placeholder) Copyright © 3TPT 2019</span></div>
        </div>
    </footer>
    </div><a class="border rounded d-inline scroll-to-top" href="#page-top"><i class="fas fa-angle-up"></i></a></div>
  
    <div id="modal-create-rac" class="modal fade" tabindex="-1" role="dialog">
      <div class="modal-dialog" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title">Intro</h5>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body" style="height: 60vh; max-height: 600px; padding:0;overflow: hidden;">
            <div id="modal-create-rac-panes" style="transform: translateX(0);width: 100%;height: 100%;display: flex; flex-direction: row;">
              <div class="modal-pane" style="background-color:#4e73df;color: #FFF;justify-content: center;text-align: center;">
                Follow the steps to create an RAC
                <button class="btn btn-nextPane">
                  <i class="far fa-arrow-alt-circle-right" style="font-size: 2.5rem; color:#FFF;"></i>
                </button>
              </div>
              
              <div class="modal-pane" style="text-align: center;">
                <h5> Journey Information </h5>
                <div class="form-row">
                  <div class="form-group col-md-6">
                    <input type="text" class="form-control" id="journeyfrom" placeholder="Journey From">
                  </div>
                  <div class="form-group col-md-6">
                    <input type="text" class="form-control" id="journeyto" placeholder="Journey To">
                  </div>
                </div>
                <hr>
                <h5> Vehicle Information </h5>
                <div class="form-row">
                  <div class="form-group col-md-6">
                    <input type="number" class="form-control" id="vehno" placeholder="Vehicle No." max="99999">
                  </div>
                  <div class="form-group col-md-6">
                    <input type="text" class="form-control" id="vehavi" placeholder="Last AVI Date" onfocus="(this.type='date')" onblur="(this.type='text')">
                  </div>
                </div>
                <hr>
                <h5> About & Standing Orders </h5>
                <a href="https://cdn.glitch.com/f8b62283-ccac-4a89-b0d8-991d640eb2ba%2F5gomGFZ.png?v=1573291454015" class="btn btn-sm btn-info" target="_blank">View</a>
                <hr>
                <button class="btn btn-nextPane">
                  <i class="far fa-arrow-alt-circle-right" style="font-size: 2.5rem;color:#4e73df;"></i>
                </button>
              </div>
              
              <div class="modal-pane" style="text-align: center;">
                <h5>
                  Driver's / Rider's Experience
                </h5>
                <table class="table" style="margin: 8px;width: calc(100% - 16px);">
                  <thead>
                    <tr><th>Driving Experience</th><th>Riding Experience</th><th></th></tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td>CAT A/B</td><td>4000km & Above</td><td style="position: relative;"><input class="form-check-input" type="radio" name="drv-experience" value="low" /></td>
                    </tr>
                    <tr>
                      <td>CAT C</td><td>1000km & Above</td><td style="position: relative;"><input class="form-check-input" type="radio" name="drv-experience" value="medium" /></td>
                    </tr>
                    <tr>
                      <td>CAT D</td><td>Below 1000km</td><td style="position: relative;"><input class="form-check-input" type="radio" name="drv-experience" value="high" /></td>
                    </tr>
                    <tr>
                      <td colspan="2">Never been trained/familiarised in vehicle that you are driving/riding</td><td style="position: relative;"><input class="form-check-input" type="radio" name="drv-experience" value="nomove" /></td>
                    </tr>
                    <tr>
                      <td colspan="2">No JIT Done</td><td style="position: relative;"><input class="form-check-input" type="radio" name="drv-experience" value="nomove" /></td>
                    </tr>
                  </tbody>
                </table>
                <button class="btn btn-nextPane">
                  <i class="far fa-arrow-alt-circle-right" style="font-size: 2.5rem;color:#4e73df;"></i>
                </button>
              </div>
              
              <div class="modal-pane" style="text-align: center;">
                <h5>
                  Vehicle / Motorcycle Type
                </h5>
                <table class="table" style="margin: 8px;width: calc(100% - 16px);">
                  <thead>
                    <tr><th>Vehicle</th><th>Motorcycle</th><th></th></tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td colspan="2">Same as last detail</td><td style="position: relative;"><input class="form-check-input" type="radio" name="veh-type" value="low" /></td>
                    </tr>
                    <tr>
                      <td>GP Car/Pickup</td><td>200CC</td><td style="position: relative;"><input class="form-check-input" type="radio" name="veh-type" value="low" /></td>
                    </tr>
                    <tr>
                      <td>Class 3</td><td>800CC</td><td style="position: relative;"><input class="form-check-input" type="radio" name="veh-type" value="medium" /></td>
                    </tr>
                    <tr>
                      <td>Class 4</td><td>800CC</td><td style="position: relative;"><input class="form-check-input" type="radio" name="veh-type" value="high" /></td>
                    </tr>
                  </tbody>
                </table>
                <button class="btn btn-nextPane">
                  <i class="far fa-arrow-alt-circle-right" style="font-size: 2.5rem;color:#4e73df;"></i>
                </button>
              </div>
              
              <div class="modal-pane" style="text-align: center;">
                <h5>
                 Fatigue
                </h5>
                <table class="table" style="margin: 8px;width: calc(100% - 16px);">
                  <thead>
                    <tr><th colspan="2">Length of Rest</th><th></th></tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td colspan="2">More than 7 hours</td><td style="position: relative;"><input class="form-check-input" type="radio" name="fatigue" value="low" /></td>
                    </tr>
                    <tr>
                      <td colspan="2">Less than 7 hours (In camp/home)</td><td style="position: relative;"><input class="form-check-input" type="radio" name="fatigue" value="medium" /></td>
                    </tr>
                    <tr>
                      <td colspan="2">Less than 7 hours (Field)</td><td style="position: relative;"><input class="form-check-input" type="radio" name="fatigue" value="high" /></td>
                    </tr>
                    <tr>
                      <td colspan="2">Less than 4 hours (Field)</td><td style="position: relative;"><input class="form-check-input" type="radio" name="fatigue" value="nomove" /></td>
                    </tr>
                  </tbody>
                </table>
                <button class="btn btn-nextPane">
                  <i class="far fa-arrow-alt-circle-right" style="font-size: 2.5rem;color:#4e73df;"></i>
                </button>
              </div>
              
              <div class="modal-pane" style="text-align: center;">
                <h5>
                 Health
                </h5>
                <table class="table" style="margin: 8px;width: calc(100% - 16px);">
                  <thead>
                    <tr><th colspan="2">Condition</th><th></th></tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td colspan="2">Good</td><td style="position: relative;"><input class="form-check-input" type="radio" name="health" value="low" /></td>
                    </tr>
                    <tr>
                      <td colspan="2">Fair (Just recovered from illness)</td><td style="position: relative;"><input class="form-check-input" type="radio" name="health" value="medium" /></td>
                    </tr>
                    <tr>
                      <td colspan="2">Poor (Ill or still under medication that cause drowsiness)</td><td style="position: relative;"><input class="form-check-input" type="radio" name="health" value="nomove" /></td>
                    </tr>
                  </tbody>
                </table>
                <button class="btn btn-nextPane">
                  <i class="far fa-arrow-alt-circle-right" style="font-size: 2.5rem;color:#4e73df;"></i>
                </button>
              </div>
              
              <div class="modal-pane" style="text-align: center;">
                <h5>
                 Weather
                </h5>
                <table class="table" style="margin: 8px;width: calc(100% - 16px);">
                  <thead>
                    <tr><th colspan="2">Condition</th><th></th></tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td colspan="2">Dry</td><td style="position: relative;"><input class="form-check-input" type="radio" name="weather" value="low" /></td>
                    </tr>
                    <tr>
                      <td colspan="2">Wet</td><td style="position: relative;"><input class="form-check-input" type="radio" name="weather" value="medium" /></td>
                    </tr>
                    <tr>
                      <td colspan="2">Heavy Showers</td><td style="position: relative;"><input class="form-check-input" type="radio" name="weather" value="high" /></td>
                    </tr>
                  </tbody>
                </table>
                <button class="btn btn-nextPane">
                  <i class="far fa-arrow-alt-circle-right" style="font-size: 2.5rem;color:#4e73df;"></i>
                </button>
              </div>
              
              <div class="modal-pane" style="text-align: center;">
                <h5>
                 Route Familiarity
                </h5>
                <table class="table" style="margin: 8px;width: calc(100% - 16px);">
                  <thead>
                    <tr><th colspan="2">Level</th><th></th></tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td colspan="2">Familiar</td><td style="position: relative;"><input class="form-check-input" type="radio" name="familiarity" value="low" /></td>
                    </tr>
                    <tr>
                      <td colspan="2">Not familiar even after route brief done</td><td style="position: relative;"><input class="form-check-input" type="radio" name="familiarity" value="medium" /></td>
                    </tr>
                    <tr>
                      <td colspan="2">Not familiar as route brief is not done</td><td style="position: relative;"><input class="form-check-input" type="radio" name="familiarity" value="nomove" /></td>
                    </tr>
                  </tbody>
                </table>
                <button class="btn btn-nextPane">
                  <i class="far fa-arrow-alt-circle-right" style="font-size: 2.5rem;color:#4e73df;"></i>
                </button>
              </div>
              
              <div class="modal-pane" style="text-align: center;">
                <h5>
                 Mission
                </h5>
                <table class="table" style="margin: 8px;width: calc(100% - 16px);">
                  <thead>
                    <tr><th colspan="2">Type</th><th></th></tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td colspan="2">Admin</td><td style="position: relative;"><input class="form-check-input" type="radio" name="mission" value="low" /></td>
                    </tr>
                    <tr>
                      <td colspan="2">Training/Operations(Including towing)</td><td style="position: relative;"><input class="form-check-input" type="radio" name="mission" value="medium" /></td>
                    </tr>
                    <tr>
                      <td colspan="2">All administrative towing</td><td style="position: relative;"><input class="form-check-input" type="radio" name="mission" value="high" /></td>
                    </tr>
                  </tbody>
                </table>
                <button class="btn btn-nextPane">
                  <i class="far fa-arrow-alt-circle-right" style="font-size: 2.5rem;color:#4e73df;"></i>
                </button>
              </div>
              
              <div class="modal-pane" style="text-align: center;">
                <h5>
                 Without Vehicle Commander
                </h5>
                <table class="table" style="margin: 8px;width: calc(100% - 16px);">
                  <thead>
                    <tr><th colspan="2">Driver's Experience</th><th></th></tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td colspan="2">CAT A, B</td><td style="position: relative;"><input class="form-check-input" type="radio" name="no-vcom" value="low" /></td>
                    </tr>
                    <tr>
                      <td colspan="2">CAT C</td><td style="position: relative;"><input class="form-check-input" type="radio" name="no-vcom" value="medium" /></td>
                    </tr>
                    <tr>
                      <td colspan="2">CAT D</td><td style="position: relative;"><input class="form-check-input" type="radio" name="no-vcom" value="high" /></td>
                    </tr>
                    <tr>
                      <td colspan="2">N/A</td><td style="position: relative;"><input class="form-check-input" type="radio" name="no-vcom" value="na" /></td>
                    </tr>
                  </tbody>
                </table>
                <button class="btn btn-nextPane">
                  <i class="far fa-arrow-alt-circle-right" style="font-size: 2.5rem;color:#4e73df;"></i>
                </button>
              </div>
              
              <div class="modal-pane" style="text-align: center;">
                <h5>
                 Vehicle / Motorcycle Serviceability
                </h5>
                <table class="table" style="margin: 8px;width: calc(100% - 16px);">
                  <thead>
                    <tr><th colspan="2">Fault Severity</th><th></th></tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td colspan="2">No fault</td><td style="position: relative;"><input class="form-check-input" type="radio" name="servicibility" value="low" /></td>
                    </tr>
                    <tr>
                      <td colspan="2">Minor Fault</td><td style="position: relative;"><input class="form-check-input" type="radio" name="servicibility" value="high" /></td>
                    </tr>
                    <tr>
                      <td colspan="2">Major Fault</td><td style="position: relative;"><input class="form-check-input" type="radio" name="servicibility" value="nomove" /></td>
                    </tr>
                  </tbody>
                </table>
                <button class="btn btn-nextPane">
                  <i class="far fa-arrow-alt-circle-right" style="font-size: 2.5rem;color:#4e73df;"></i>
                </button>
              </div>
              
              <div class="modal-pane" style="text-align: center;">
                <h5>
                 Permit holder / VCOM / Front passsenger checklist table
                </h5>
                <button class="btn btn-nextPane">
                  <i class="far fa-arrow-alt-circle-right" style="font-size: 2.5rem;color:#4e73df;"></i>
                </button>
              </div>
              
              <div class="modal-pane" style="text-align: center;">
                <h5>Overall Risk</h5>
                <h5>?</h5>
                <hr>
                <h5>Countersigning Officer</h5>
                <div class="form-row">
                  <div class="form-group col-md-3">
                    <input type="text" class="form-control" id="officerrank" placeholder="Rank">
                  </div>
                  <div class="form-group col-md-9">
                    <input type="text" class="form-control" id="officername" placeholder="Name">
                  </div>
                </div>
                <canvas id="signature-officer" class="signature"></canvas>
                <button id="clear-sign-officer" class="btn btn-danger">Clear</button>
                <button class="btn btn-nextPane">
                  <i class="far fa-arrow-alt-circle-right" style="font-size: 2.5rem;color:#4e73df;"></i>
                </button>
                
              </div>
              
              <div class="modal-pane" style="text-align: center;">
                <h5>Overall Risk</h5>
                <h5>?</h5>
                <hr>
                <h5>Vehicle Commander / Front Passenger</h5>
                <div class="form-row">
                  <div class="form-group col-md-3">
                    <input type="text" class="form-control" id="vcomrank" placeholder="Rank">
                  </div>
                  <div class="form-group col-md-9">
                    <input type="text" class="form-control" id="vcomname" placeholder="Name">
                  </div>
                </div>
                <canvas id="signature-vcom" class="signature"></canvas>
                <button id="clear-sign-vcom" class="btn btn-danger">Clear</button>
                <button class="btn btn-nextPane">
                  <i class="far fa-arrow-alt-circle-right" style="font-size: 2.5rem;color:#4e73df;"></i>
                </button>
              </div>
              
              <div class="modal-pane" style="text-align: center;">
                <h5>
                  <p> Final overview of rac form </p>
                </h5>
                <hr>
                <h5>Transport Operator's Signature</h5>
                <canvas id="signature-user" class="signature"></canvas>
                <button id="clear-sign-user" class="btn btn-danger">Clear</button>
                <button class="btn btn-primary" id="createrac">Complete</button>
              </div>
              
            </div>
          </div>
        </div>
      </div>
    </div>
  
    <script src="/js/jquery.min.js"></script>
    <script src="/bootstrap/js/bootstrap.min.js"></script>
    <script src="/js/chart.min.js"></script>
    <script src="/js/bs-charts.js"></script>
    <!--<script src="https://cdn.datatables.net/1.10.20/js/jquery.dataTables.min.js"></script>
    <script src="https://cdn.datatables.net/1.10.20/js/dataTables.bootstrap4.min.js"></script>-->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-easing/1.4.1/jquery.easing.js"></script>
    <script type="text/javascript" src="https://cdn.datatables.net/v/bs4/dt-1.10.20/b-1.6.1/b-colvis-1.6.1/b-flash-1.6.1/b-html5-1.6.1/r-2.2.3/datatables.min.js"></script>
    <script src="/js/theme.js"></script>
  </body>
  <script>
      let detailData = [
      ['15/10/2019', 'Sembawang Wharves', 'PSV'],
      ['16/10/2019', 'Sembawang Wharves', 'PSV'],
      ['17/10/2019', '9SIR Live Firing', '5Ton'],
      ['18/10/2019', '9SIR Outfield', '5Ton'],
      ['19/10/2019', '9SIR IPPT', 'SOUV'],
      ['20/10/2019', 'IDTC House Visit', 'OUV'],
      ['21/10/2019', 'DIV ICT IPPT', 'SOUV'],
      ['22/10/2019', 'Sembawang Wharves', 'PSV'],
      ['23/10/2019', 'Sembawang Wharves', 'PSV'],
      ['24/10/2019', '9SIR Live Firing', '5Ton'],
      ['25/10/2019', '9SIR Outfield', '5Ton'],
      ['26/10/2019', '9SIR IPPT', 'SOUV'],
      ['27/10/2019', 'IDTC House Visit', 'OUV'],
      ['30/10/2019', 'DIV ICT IPPT', 'SOUV'],
      ['31/10/2019', 'WPT2', 'SOUV']
    ];
    
    var userId;
    var username;
    var rank;
    var name;
    var node;
    var isadmin;
    
    var today = new Date();
    var dd = today.getDate();
    var mm = today.getMonth()+1; //January is 0!
    var yyyy = today.getFullYear();
     if(dd<10){
            dd='0'+dd
        } 
        if(mm<10){
            mm='0'+mm
        } 
    today = yyyy+'-'+mm+'-'+dd;
    
    $(document).ready(function() {
      $('.nav-link-history').removeClass("disabled"); 
    });
    
    document.body.onload = function(){
      /*setTimeout(()=>{
        document.getElementById("loader").style.display = "none";
        document.getElementById("wrapper").classList.remove ('d-none');
      }, 1000);*/
    
      let cookies = document.cookie;
      //token is first cookie
      let tokenCookie = cookies.split(';')[0];
      let token = tokenCookie.replace('access_token=','');
      let show = new Event('show');
      
      initCreateModal();
      
      //load table
      for(let i=0;i<detailData.length;i++){
        const row = document.createElement('tr');
        row.appendChild(createTextNode('td', detailData[i][0]));
        row.appendChild(createTextNode('td', detailData[i][1]));
        row.appendChild(createTextNode('td', detailData[i][2]));
        const btnCell = document.createElement('td');
        const createBtn = document.createElement('button');
        createBtn.textContent = 'Create';
        createBtn.className = 'btn btn-primary';
        createBtn.onclick = function(){
          $('#modal-create-rac').modal('show');
        }
        
        const viewBtn = document.createElement('button');
        viewBtn.textContent = 'View';
        viewBtn.className = 'btn btn-secondary';
        viewBtn.style.marginLeft = '4px';
        btnCell.appendChild(createBtn);
        btnCell.appendChild(viewBtn);
        row.appendChild(btnCell);
        document.getElementById('userDetailTableInner').children[1].appendChild(row);
      }
      
      //jquery data table
      var table = $('#userDetailTableInner').DataTable({
        "order":[0,'desc'],
        dom: 'lBfrtip',
        buttons: [
            {
              text:'Create Detail',
              action: function(){
                //reloadDetailDataTable()
                alert('Create Detail WIP')
              }
            }
        ]
      });
      $('.dataTables_length').addClass('bs-select');
         
      
      //Fetching user data (one time)
      fetch('/me.json')
        .then(
          function(response) {
            if (response.status !== 200) {
              console.log('Looks like there was a problem. Status Code: ' +
                response.status);
              return;
            }
            response.json().then(data=> {
              console.log(JSON.stringify(data));
              //Set user variables here
              userId = data.id;
              username = data.username;
              rank = data.rank;
              name = data.name;
              node = data.node;
              isadmin = data.isadmin;
              document.getElementById("name-holder").innerHTML=rank+" "+name;
              
              // console.log(userId);
              // console.log(username)
              // console.log(rank);
              // console.log(name);
              // console.log(node);
              // console.log(isadmin);
              // console.log(userId,username,rank,name,node,isadmin)
            })
              .then(()=>{console.log('thenfetch',userId,username,rank,name,node,isadmin)});
           } 
        )
        .catch(function(err) {
          console.log('Fetch Error :-S', err);
        });
    
      //Fetching data in interval (table updates, alerts etc)
      /*setTimeout(()=>{
        fetch('/intervalData.json')
        .then(
          function(response) {
            if (response.status !== 200) {
              console.log('Looks like there was a problem. Status Code: ' +
                response.status);
              return;
            }
            response.json().then(function(data) {
              console.log(JSON.stringify(data));
              //Set user variables here, can also set global elements
              var userId = data.id;
              var username = data.username;
              document.getElementById("name-holder").innerHTML=username;
            });
          }
        )
      },30000)*/
      
      
      
      
      //Page swapping
      
      //Initial state
      let state = {
        "previousPage" : "index",
        "currentPage" : "index"
      };
      (function initialize() {
        window.history.replaceState(state, null, "");
        
        render(state);
      })();
      //Navbar links
      var navHistory = document.querySelectorAll('.nav-link-history');
      navHistory.forEach((nav)=>{
        //alert(nav)
        nav.addEventListener('click', navClick);
      })
      
      //Custom event for page show
      function pageShown(ev){
        console.log('Page',ev.target.id,'was shown');
      };
      
      //Pages
      var pages = document.querySelectorAll('.page');
      pages.forEach((pg)=>{
        pg.addEventListener('show', pageShown);
      })
      
      
      
      //Navigation function
      function navClick(ev){
        ev.preventDefault();
        let href = ev.currentTarget.getAttribute("href");
        if (href === state.currentPage){
          return;
        }
        [state.previousPage,state.currentPage] = [state.currentPage,href];
        
        history.pushState(state,href,'');
        //alert(JSON.stringify(state))
        document.getElementById('nav-'+state.previousPage).classList.remove('active');
        document.getElementById('nav-'+state.currentPage).classList.add('active');
        document.querySelector('.currentPage').classList.add('d-none');
        document.querySelector('.currentPage').classList.remove('currentPage');
        document.getElementById('page-'+state.currentPage).classList.remove('d-none')
        document.getElementById('page-'+state.currentPage).classList.add('currentPage')
        var title = ' - 3TPT'
        switch (state.currentPage){
          case "index":
            title = "Dashboard" + title;
            break;
          default:
            title = state.currentPage.charAt(0).toUpperCase() + state.currentPage.slice(1) + title;
        }
        
        
        try {
            document.getElementsByTagName('title')[0].innerHTML = title.replace('<','&lt;').replace('>','&gt;').replace(' & ',' &amp; ');
        }
        catch (e) { }
        document.title = title;
        render(state);        
      }    
      
      //On Back
      window.onpopstate = function(event) {
        //alert("location: " + document.location + ", state: " + JSON.stringify(event.state));
        state = event.state
        document.getElementById('nav-'+state.previousPage).classList.remove('active');
        document.getElementById('nav-'+state.currentPage).classList.add('active');
        document.querySelector('.currentPage').classList.add('d-none');
        document.querySelector('.currentPage').classList.remove('currentPage');
        document.getElementById('page-'+state.currentPage).classList.remove('d-none');
        document.getElementById('page-'+state.currentPage).classList.add('currentPage');
        render(state);
      };
      
      
      function render(){
        //we can render data here
        document.getElementById('page-'+state.currentPage).dispatchEvent(show);     
      }
      
    initSignatureBox(document.getElementById('signature-officer'), document.getElementById('clear-sign-officer'), 800, 400);
    initSignatureBox(document.getElementById('signature-vcom'), document.getElementById('clear-sign-vcom'), 800, 400);
    initSignatureBox(document.getElementById('signature-user'), document.getElementById('clear-sign-user'), 800, 400);
    //set avi max date to today
    document.getElementById("vehavi").setAttribute("max", today);
    }
    
    function initCreateModal(){
      const modalPanes = document.getElementById('modal-create-rac-panes');
      const nextButtons = modalPanes.getElementsByClassName('btn-nextPane');
      for(let i=0;i<nextButtons.length;i++){
        nextButtons[i].onclick = function(){
          const curTranslate = parseInt(modalPanes.style.transform.split('(')[1].split(')')[0].replace('%', ''));
          modalPanes.style.transform = 'translateX(' + (curTranslate - 100) + '%)';
        }
      }
    }
    
    function createTextNode(type, content){
      const ret = document.createElement(type);
      ret.textContent = content;
      return ret;
    }
    
    function initSignatureBox(cvs, clearBtn, canvasWidth, canvasHeight){
      const canvas = cvs;
      const ctx = canvas.getContext('2d');
      let isPainting = false;
      
      //setup
      canvas.width = canvasWidth;
      canvas.height = canvasHeight;
      
      ctx.lineWidth = 6;
      ctx.lineJoin = 'round';
      ctx.lineCap = 'round';
      ctx.strokeStyle = '#F00';
      
      const onPaint = (e) => {
        if(!isPainting) return;

        const ratio = (canvasWidth / canvas.clientWidth);

        ctx.lineTo(ratio * e.offsetX, ratio * e.offsetY);
        ctx.stroke();
      };
      
      const onTouchPaint = (e) => {
        if(!isPainting) return;

        const bRect = canvas.getBoundingClientRect();
        const ratio = (canvasWidth / bRect.width);

        ctx.lineTo(ratio * (e.targetTouches[0].clientX - bRect.x), ratio * (e.targetTouches[0].clientY - bRect.y));
        ctx.stroke();
      };
      
      const stopDrawing = (e) => {
        if(!isPainting) return;

        isPainting = false;
        canvas.removeEventListener('mousemove', onPaint, false);
        canvas.removeEventListener('touchmove', onTouchPaint, false);
      };

      const startDrawing = (e) => {
        if(isPainting) return;

        isPainting = true;
        const ratio = (canvasWidth / canvas.clientWidth);

        ctx.beginPath();
        ctx.moveTo(ratio * e.offsetX, ratio * e.offsetY);

        canvas.addEventListener('mousemove', onPaint, false);
        canvas.addEventListener('touchmove', onTouchPaint, false);
      };
      
      const clearCanvas = () => {
        ctx.clearRect(0,0,canvasWidth,canvasHeight);
      }
      
      canvas.addEventListener('mousedown', startDrawing);
      canvas.addEventListener('mouseup', stopDrawing);
      canvas.addEventListener('touchstart', startDrawing);
      canvas.addEventListener('touchend', stopDrawing);
      
      if(clearBtn !== undefined){
        clearBtn.addEventListener('click', clearCanvas);
      }
    }
    
      
      
      
    /*
    RAC Modal conditions, rules & stuff:
    All panes required to select 1 radio btn
    Txtbox and canvas fields required
    Canvas allow retrying
    If no move radio btn selected, do a popup/prompt but still allow to continue
    Overall risk = highest risk, or if med > 5 = high, high > 5 = no move
    
    To do:
    When entering modal, lock user movement of whatever's behind (no back, etc)
    */
    
      

    
    
//     async function reloadDetailDataTable(){
      
//       //ajax get request for table data, store in an array (reuse detailData)
//       var url = "/users/"+userId+"/details";
//       const response = await fetch(url);
//       const detailTableData = await response.json();
//       console.log(detailTableData)

      
      
//       //clear table
//        $("#userDetailTableInner tbody tr").remove();
      
//       //load table (reuse)
      
//       for(let i=0;i<detailTableData.length;i++){
//         const row = document.createElement('tr');
//         row.appendChild(createTextNode('td', detailTableData[i][0]));
//         row.appendChild(createTextNode('td', detailTableData[i][1]));
//         row.appendChild(createTextNode('td', detailTableData[i][2]));
//         const btnCell = document.createElement('td');
//         const createBtn = document.createElement('button');
//         createBtn.textContent = 'Create';
//         createBtn.className = 'btn btn-primary';
//         createBtn.onclick = function(){
//           $('#modal-create-rac').modal('show');
//         }
        
//         const viewBtn = document.createElement('button');
//         viewBtn.textContent = 'View';
//         viewBtn.className = 'btn btn-secondary';
//         viewBtn.style.marginLeft = '4px';
//         btnCell.appendChild(createBtn);
//         btnCell.appendChild(viewBtn);
//         row.appendChild(btnCell);
//         document.getElementById('userDetailTableInner').children[1].appendChild(row);
//       }
//     }
    
  </script>
</html>